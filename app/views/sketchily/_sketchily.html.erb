<% # Clients of this partial must supply the following variables:
   # template
   # object_name
   # method
   # options %>

<% sketchily_tag = ActionView::Helpers::InstanceTag.new(object_name, method, template, options.delete(:object)) %>

<%= render :partial => "sketchily/embed",
           :formats => :html,
           :locals => {:id => sketchily_tag.send(:tag_id),
                       :value => sketchily_tag.value(sketchily_tag.object),
                       :show_menu => options[:show_menu],
                       :hide_image_tool => options[:hide_image_tool],
                       :canvas_width => options[:canvas_width],
                       :canvas_height => options[:canvas_height],
                       :canvas_expansion => options[:canvas_expansion],
                       :hide_rulers => options[:hide_rulers],
                       :width => options[:width],
                       :height => options[:height]} %>

<%= sketchily_tag.to_input_field_tag("hidden", options.except(:show_menu, :hide_image_tool, :canvas_width, :canvas_height, :canvas_expansion, :hide_rulers, :width, :height)) %>

